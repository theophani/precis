<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="de-DE"> 
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Test 4</title>
<!--script src="http://jquery-ui.googlecode.com/svn/trunk/jquery-1.4.1.js" type="text/javascript" charset="utf-8"></script--> 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script> 
<script src="jquery.jeditable.js" type="text/javascript" charset="utf-8"></script> 
<script src="ui.core.js" type="text/javascript" charset="utf-8"></script> 
<script src="ui.sortable.js" type="text/javascript" charset="utf-8"></script>

<script src="jquery.jeditable.autogrow.js" type="text/javascript" ></script> 
<script type="text/javascript" src="jquery.autogrow.js"></script> 

<script type="text/javascript" src="textile.js"></script>

<script type="text/javascript" src="http://jquery-ui.googlecode.com/svn/trunk/ui/jquery.effects.core.js"></script>

<style type="text/css" media="screen">
/* reset.css */
html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, code, del, dfn, em, img, q, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {margin:0;padding:0;border:0;font-weight:inherit;font-style:inherit;font-size:100%;font-family:inherit;vertical-align:baseline;}
body {line-height:1.5;}
blockquote:before, blockquote:after, q:before, q:after {content:"";}
blockquote, q {quotes:"" "";}
a img {border:none;}

/* typography.css */
body {font-size:75%;color:#222;background:#fff;font-family:Arial, Helvetica, sans-serif;}
h1, h2, h3, h4, h5, h6 {font-weight:normal;color:#111;}
h1 {font-size:3em;line-height:1;margin-bottom:0.5em;}
h2 {font-size:2em;margin-bottom:0.75em;}
h3 {font-size:1.5em;line-height:1;margin-bottom:1em;}
h4 {font-size:1.2em;line-height:1.25;margin-bottom:1.25em;}
h5 {font-size:1em;font-weight:bold;margin-bottom:1.5em;}
h6 {font-size:1em;font-weight:bold;}
h1 img, h2 img, h3 img, h4 img, h5 img, h6 img {margin:0;}
p {margin:0 0 1.5em;}
p img.left {float:left;margin:1.5em 1.5em 1.5em 0;padding:0;}
p img.right {float:right;margin:1.5em 0 1.5em 1.5em;}
a:focus, a:hover {color:#000;}
a {color:#009;text-decoration:underline;}
blockquote {margin:1.5em;color:#666;font-style:italic;}
strong {font-weight:bold;}
em, dfn {font-style:italic;}
li ul, li ol {margin:0 1.5em;}
ul, ol {margin:0 1.5em 1.5em 1.5em;}
ul {list-style-type:disc;}
ol {list-style-type:decimal;}
dl {margin:0 0 1.5em 0;}
dl dt {font-weight:bold;}
dd {margin-left:1.5em;}
.small {font-size:.8em;margin-bottom:1.875em;line-height:1.875em;}
.large {font-size:1.2em;line-height:2.5em;margin-bottom:1.25em;}
.hide {display:none;}
.quiet {color:#666;}
.loud {color:#000;}
.highlight {background:#ff0;}
.added {background:#060;color:#fff;}
.removed {background:#900;color:#fff;}
.first {margin-left:0;padding-left:0;}
.last {margin-right:0;padding-right:0;}
.top {margin-top:0;padding-top:0;}
.bottom {margin-bottom:0;padding-bottom:0;}

/*
Our deviations from reset
*/

body, textarea {
  color: rgb(47, 190, 53);
  background: rgb(51, 51, 51);
  font-family: 'Courier New', Courier, mono;
}

img { margin-bottom: 1.5em; }

textarea { border: 1px dotted #666; margin: -5px; padding: 4px; font-size: 100%; line-height: 1.5; margin-top: 3px; background: Transparent; outline: 0; }
button { margin-top: 10px; }
li textarea { margin-bottom: 5px; }
blockquote textarea { color:#666;font-style:italic; padding: 4px 22px; }
blockquote form { margin: 0 -18px; }

h1,h2,h3,h4,h4,h6 { color: #fff; font-family: Helvetica, Arial, sans-serif; }
h1,h2,h3,h4,h4,h6 { text-shadow: #000 0px 1px 1px; }

h1 textarea, h2 textarea, h3 textarea, h4 textarea, h5 textarea, h6 textarea
{ color: #fff; font-family: Helvetica, Arial, sans-serif; }
h1 textarea, h2 textarea, h3 textarea, h4 textarea, h5 textarea, h6 textarea
{ text-shadow: #000 0px 1px 1px; }

h1 textarea {line-height:1;}
h2 textarea {}
h3 textarea {line-height:1;}
h4 textarea {line-height:1.25;}
h5 textarea {font-weight:bold;}
h6 textarea {font-weight:bold;}

ul, ol {margin-left: 2em; margin-right: 0;}
ul.inside, ol.inside { list-style-position: inside; margin-left: 0; margin-right: 2em; }
.inside li button { display: none; }
.inside button { margin-top: 0; }

.container {
  width: 300px;
  margin: 50px auto;
  padding-right: 200px;
}

a { color: #990; }
a:hover{ color: #FFF; }

</style>

<style type="text/css" media="screen">

.floating_admin_options {
  position:fixed;
  width: 250px;
  right:120px; top:-20px;
  padding: 70px 20px 10px 20px;
  background-color: #fff;
  -webkit-box-shadow: #000 0px 0px 18px;
  font-family: Arial; font-size: 10px;
}

.floating_admin_options label {
  width: 60px; display: block; float: left;
}

.floating_admin_options .submit input {
  margin-left: 62px;
}

.floating_admin_options h1 {
  color: #666; font-size: 2em; margin-bottom: 0.75em; text-shadow: none;
}

.floating_admin_options input[type="submit"] {
  font-size: 10px; line-height:18px;
  font-family: Arial; color: #FFF;
	padding: 0; margin-right: 6px;
	background-color: #666;
  border: 1px solid #666;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
}

.floating_admin_options input[type="submit"]:hover {
	background-color: #000;
  border-color: #000;
}

.floating_admin_options p {
  margin-bottom: 1em; clear: both;
}

.floating_login_tucked {
  padding-top: 30px; height: 25px; overflow: hidden;
  cursor: pointer;
}

.floating_menu {
  width: 75px;
  position:fixed;
  right:25px; top:50px;
}
.floating_menu span {
  font-size: 10px; line-height:15px;
  font-family: Arial; color: #666;
}
.floating_menu li:hover {
  text-decoration: underline;
  cursor: pointer;
}

.precis-control {
  position: relative;
  cursor: pointer;
  z-index: 0;
}

.precis-control:hover {
  z-index: 1;
  /* -webkit-box-shadow: #000 0px 0px 18px; */ /* looks gross :( */
}

.precis-control > * {
/*  margin-bottom: 0; */
/*  padding-bottom: 0;*/
}

.precis-control blockquote {
  margin-top: 0;
}

.row-actions {
  /* visibility: hidden; */
  display: none;
  cursor: default;
  font-size: 10px;
  line-height:18px; margin-top: -18px; /* the same, but complimentary */
  font-family: Arial; color: #666;
	padding: 0;
	/* below should only show if needed? */
	background-color: rgb(51, 51, 51);
	filter: alpha(opacity=85);
  opacity: .85;
  
  background-color: #222; padding: 0 2px;
  border: 0px solid #222;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  margin-top: -18px;
  float:left;
}

.precis-control button {
  font-size: 10px; line-height:18px;
  font-family: Arial; color: #FFF;
	padding: 0; margin-right: 6px;
	background-color: #666;
  border: 1px solid #666;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
}

.precis-control button:hover {
  color: #666;
	background-color: #FFF;
  border-color: #FFF;
}

.precis-control:hover .row-actions, .row-actions:active {
	display: block;
}

.precis-state-disabled .precis-control:hover .row-actions {
	display: none;
}

span.edit:hover,
span.add:hover,
span.change:hover,
span.delete:hover  { background-color: #666; color: #fff; cursor: pointer; }
span.delete:hover { background-color: #C00; }
span.change:hover { cursor: default; }

span.change {
	position: relative;
}

span.tip { font-style: italic; }

span.change div {
	display: none;
	position: absolute;
	left: 0;
	top: 0px;
}

span.change:hover div {
	display: block;
	width: 120px;
}

span.disabled, span.disabled:hover { background-color: Transparent; color: #454545; text-decoration: line-through;  }
span.disabled:hover div { display: none; }

span.change ul {
  margin: 0;
  margin-top: 15px;
	border-radius: 5px;
	-o-border-radius: 5px;
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	background: #f3f3f3;
	border: 1px solid #999;
    box-shadow: 0 3px 6px rgba(0,0,0,0.6);
    -moz-box-shadow: 0 3px 6px rgba(0,0,0,0.6);
    -webkit-box-shadow: 0 3px 6px rgba(0,0,0,0.6);
}

span.change ul li {
	display: block;
  margin: 0;
	letter-spacing: 0;
	text-transform: none;
}

span.change ul li  {
  color: #333;
	display: block;
	padding: 5px 8px;
	border-top: 1px solid #ddd;
	line-height: 1.1;
}

span.change ul li span {
  text-transform: lowercase;
  font-variant: small-caps;
  letter-spacing: 1px;
  color: #999; color: #888;
  font-size: 12px;
}

span.change ul li em {
  font-style: normal;
  display: inline-block; width: 2em;
}

span.change ul li:first-child {
	border: none;
}

span.change ul li:hover {
	background: #008df5;
	color: #fff;
	text-decoration: none;
	text-shadow: .8px .8px .5px #00406f;
}

span.change ul li:hover span {
	color: #055a9b; color: #044475;
	text-shadow: .8px .8px .5px #74b9e8;
}

span.change ul li:first-child {
	border-top-left-radius: 4px;
	-o-border-top-left-radius: 4px;
	-moz-border-radius-topleft: 4px;
	-webkit-border-top-left-radius: 4px;
	border-top-right-radius: 4px;
	-o-border-top-right-radius: 4px;
	-moz-border-radius-topright: 4px;
	-webkit-border-top-right-radius: 4px;
}

span.change ul li:last-child {
	border-bottom-left-radius: 4px;
	-o-border-bottom-left-radius: 4px;
	-moz-border-radius-bottomleft: 4px;
	-webkit-border-bottom-left-radius: 4px;
	border-bottom-right-radius: 4px;
	-o-border-bottom-right-radius: 4px;
	-moz-border-radius-bottomright: 4px;
	-webkit-border-bottom-right-radius: 4px;
}


/* menu hover test */
/* p {margin-bottom:0} */

</style>

<script type="text/javascript" charset="utf-8">
<!--
$(document).ready(function() {

    var editable_settings = {
        //tooltip : "Double click to edit",
        //placeholder: "Double click to edit",
        //event   : "dblclick",
        tooltip : "Click to edit",
        placeholder: "Click to edit",
        event   : "click",
        type    : 'autogrow',
        method  : "put",
        submit  : 'OK',
        cancel  : 'Cancel',
        onblur  : "ignore",
        data    : prep_input
    }

    // MUST be before the wrap OR must change to select correctly. Hrmm.
    
    $.fn.addPrecis = function() {
      $(this).each( function() {
        if ( $(this).attr("tagName").toLowerCase()=='img' ) {
          // skip!
        } else {
          if ( $(this).attr("tagName").toLowerCase()=='ul' || $(this).attr("tagName").toLowerCase()=='ol' ) {
            $(this).find('li').editable( function(value,settings) { return parse_input(value, settings, this); } , editable_settings );
            $(this).find('li').addClass('target');
            $(this).wrap('<div class="precis-control">').parent().prepend('<div class="row-actions"><span class="edit">edit</span> | <span class="delete">delete</span> | <span class="add">add item</span> | <span class="change">change type<div><ul><li><em>ul</em><span>bulleted list</span></li><li><em>ol</em><span>numbered list</span></li></ul></span></div></span></div>');
          } else {
            $(this).editable( function(value,settings) { return parse_input(value, settings, this); }, editable_settings );
            $(this).addClass('target');
            $(this).wrap('<div class="precis-control">').parent().prepend('<div class="row-actions"><span class="edit">edit</span> | <span class="delete">delete</span> | <span class="change">change type<div><ul><li><em>p</em><span>paragraph</span></li><li><em>h1</em><span>heading 1</span></li><li><em>h2</em><span>heading 2</span></li><li><em>h3</em><span>heading 3</span></li><li><em>blockquote</em><span></span></li></ul></span></div></span></div>');
          }
          $(this).parent().find('span.edit').click(       function() { $(this).editPrecis();          } );
          $(this).parent().find('span.delete').click(     function() { $(this).deletePrecis();        } );
          $(this).parent().find('span.add').click(        function() { $(this).addPrecisListItem();   } );
          $(this).parent().find('span.change li').click(  function() { $(this).changePrecisType();    } );
        }
      });
    }
    
    $.fn.editPrecis = function() { $(this).findTarget().click(); }
    $.fn.deletePrecis = function() { if (confirm('You are about to delete ...')) $(this).findControl().remove(); }
    $.fn.addPrecisListItem = function() {
      var e = $( document.createElement('li') );
      e.html('Click to edit your new item');
      $(this).findTarget().after(e);
      e.editable( function(value,settings) { return parse_input(value, settings, this); } , editable_settings );
    }
    $.fn.changePrecisType = function() {
      var tagType = $(this).children('em').text().toLowerCase();
      var e = $( document.createElement( tagType ) );
      if ( $(this).findTarget().attr("tagName").toLowerCase()=='li') e.html($(this).findTarget().parent().html());
      else e.html($(this).findTarget().html());

      $(this).findControl().after(e);
      $(this).findControl().remove();
      e.addPrecis();
    }

    $.fn.findTarget =   function() {
      return $(this).parents('.precis-control:first').find('.target:last');
    }
    $.fn.findControl =  function() { return $(this).parents('.precis-control:first'); }

    $('.container > *').addPrecis(); // these lines turn on and off the editing.
		$(".container").sortable();
		$(".container").sortable('disable');
		$('.disable-sortable').hide();

    $('.enable-sortable').click( function() {
      $(this).hide();
      $('.container').addClass('precis-state-disabled');
      $(".container").sortable('enable');
      $('.target').each( function() {
          $(this).editable('disable');
          $(this).attr('title','Drag and drop to rearrange');
      });
      $('.disable-sortable').show();
    });
    $('.disable-sortable').click( function() {
      $(this).hide();
      $('.container').removeClass('precis-state-disabled');
      $(".container").sortable('disable');
      $('.target').each( function() {
          $(this).editable('enable');
          $(this).attr('title', editable_settings['tooltip']);
      });
      $('.enable-sortable').show();
    });

    $(".floating_menu li").click( function () {
      var tagType = $(this).text().toLowerCase();
      var e = $( document.createElement( tagType ) );
      if (tagType=='ul' || tagType=='ol') {
        //e.html('<li>Double click to edit your new element</li>');
        e.html('<li>Click to edit your new element</li>');
      } else {
        //e.html('Double click to edit your new element');
        e.html('Click to edit your new element');
      }
      
      $('.container').append(e);
      e.addPrecis();
    });
    
    $('.floating_admin_options').addClass('floating_login_tucked').click( function() {
      if ($(this).hasClass('floating_login_tucked')) {
        $(this).removeClass('floating_login_tucked', 500, function() {
          if ($(window).height() < $(this).height() ) $(this).css('position','absolute');          
        });
      }
    });
       
    function parse_input(value, settings, element) {
      $(element).findControl().find('span.change').removeClass('disabled');
      if (value=='') {
        if ($(element).attr("tagName").toLowerCase() == 'li')
          $(element).remove();
        else
          $(element).findControl().remove();
          
        return false;
      }
      
      // strips html tags
      value=value.replace(/<\S[^><]*>/g, "");
      // converts allowed tags
      value = superTextile(value);
      return value;
    }
    
    function prep_input(value, settings) {
      if ( $(this).attr("tagName").toLowerCase()=='li' )
        $(this).edit_list(settings);
        
      $(this).findControl().find('span.change').addClass('disabled');

      // this is all html to textile:
      var $content = $('<div>').html(value);
        
      easyTags = {
        strong  : "*",
        b       : "*",
        em      : "_",
        i       : "_"
      }

      $.each(easyTags, function(k,v) {
        $content.find(k).each( function() {
          $(this).replaceWith(v + $(this).text() + v);
        });
      });

      $content.find('br').each( function() {
        $(this).replaceWith('\n');
      });

      $content.find('a').each( function() {
        $(this).replaceWith('"' + $(this).text() + '":' + $(this).attr('href') + '' );
      });
      
      return $content.text(); // the extra HTML is stripped from text()
    }
    
    function load_texttile(value, settings) {
      return value;
    }
    
    $.fn.edit_list = function(settings) {
      if ( $(this).attr("tagName").toLowerCase()!='li' )
        return;
      
      if ( !($(this).parent().hasClass('inside')) ) {
        $(this).parent().addClass('inside');
        $(this).siblings().click();

        /* create the form object */
        var form = $('<form>');
        
        if (settings.submit) {
            var submit = $('<button type="button">');
            submit.html(settings.submit);
            form.append(submit);
            
            $(submit).click(function(event) {
                $parent = $(this).parents('.inside');
                $parent.find('li form').submit();
                $parent.find('form').remove();
                $parent.removeClass('inside');
                return false;
            });
            
        }
        if (settings.cancel) {
            var cancel = $('<button type="button">');
            cancel.html(settings.cancel);
            form.append(cancel);
  
            $(cancel).click(function(event) {
                $parent = $(this).parents('.inside');  
                $parent.find('li form :button').each( function() {
                    if ($(this).html() == settings.cancel)
                      $(this).click();
                });
                $parent.find('form').remove();
                $parent.removeClass('inside');
            });
        }
        
        $(this).parent().append(form);

      }
      return;
    }
    
});
// -->
</script>

</head> 
<body>
  
<div class="container">

<img src="image.jpg" width="300px;" alt="pretty grass" />
  
<h1 class="h1">HTML Ipsum Presents</h1>
	       
<p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas.
  Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. <em>Aenean ultricies mi vitae est.</em>
  <a href="link">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>

<p>Vestibulum tortor quam, feugiat <a href="linkurl">vitae</a>, comma is a problem? ultricies eget, tempor sit amet, ante. Aenean ultricies mi vitae est.
  <a href="linkurl">vitae</a>touching is a problem? eleifend leo. <strike>Vestibulum</strike> erat wisi, condimentum sed, commodo vitae, ornare sit amet,
  wisi.</p>

<h2 class="h2">Header Level 2</h2>
	       
<ol>
   <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
   <li>Aliquam tincidunt mauris eu risus.</li>
</ol>

<blockquote class="blockquote">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna.
  Cras in mi at felis aliquet congue. Vivamus pretium ornare est.</blockquote>

<h3 class="h3">Header Level 3</h3>

<ul>
   <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
   <li>Aliquam tincidunt mauris eu risus.</li>
</ul>

<ul>
	<li>Item 1</li> 
	<li>Item 2</li> 
	<li>Item 3</li> 
	<li>Item 4</li> 
	<li>Item 5</li> 
	<li>Item 6</li> 
	<li>Item 7</li> 
</ul>

</div>

<div class="floating_admin_options">
<h1>Login</h1>
<form name="loginform" id="loginform" action="login" method="post">
	<p> 
		<label>Username</label>
		<input type="text" name="log" id="user_login" class="input" value="" size="20" tabindex="10" /> 
	</p> 
	<p> 
		<label>Password</label>
		<input type="password" name="pwd" id="user_pass" class="input" value="" size="20" tabindex="20" />
	</p>
	<p class="submit">
		<input type="submit" name="submit" value="Log In" tabindex="100" />
		<input type="hidden" name="testcookie" value="1" />
	</p>
</form>
</div>

<div class="floating_menu">
<span>Click to add new items</span>
<ul>
  <li>p</li>
  <li>h1</li>
  <li>h2</li>
  <li>h3</li>
  <li>ul</li>
  <li>ol</li>
  <li>blockquote</li>
</ul>
<span class="enable-sortable">pause editing and rearrange order</span>
<span class="disable-sortable">save order and resume editing</span>
</div>

</body>
</html>
